background: white; box-sizing: border-box; transition: 0.3s;
}

        /* --- ESTILO DEL SELECTOR DE COLOR COMO CÍRCULO --- */
        .input-group .color-select {
            width: 38px; /* Tamaño fijo cuadrado */
            height: 38px;
            border-radius: 50%; /* Lo hace circular */
            flex-shrink: 0;
            cursor: pointer;
            appearance: none; /* Elimina la flecha por defecto */
            -webkit-appearance: none;
            border: 2px solid #e0e0e0; /* Borde sutil */
            padding: 0;
            color: transparent; /* Oculta el texto seleccionado */
            /* El color de fondo se define en línea por JS */
        }

        /* Estilo para las opciones del desplegable */
        .color-select option {
            padding: 10px;
            color: transparent; /* Oculta el texto en las opciones */
            /* El fondo se define en línea por JS */
        }

.input-group .fn-input { flex-grow: 1; }
        .input-group .color-select { width: 130px; flex-shrink: 0; cursor: pointer; }

.btn-remove { 
position: absolute; right: 0; top: 50%; transform: translateY(-50%);
@@ -83,7 +104,7 @@ <h1>Graficadora Inteligente</h1>
</div>

<div id="lista-funciones">
            <label>Funciones f(x) y Color</label>
            <label>Funciones f(x)</label>
</div>

<button onclick="agregarInput()" class="boton-estilo boton-secundario" style="width: 100%; margin-bottom: 15px; margin-top: 10px;">
@@ -95,8 +116,7 @@ <h1>Graficadora Inteligente</h1>
<option value="normal">Vista Normal</option>
<option value="puntos">Máximos, Mínimos y Raíces</option>
<option value="area_curva">Área Bajo la Curva (f1 al Eje X)</option>
            <option value="area_entre">Área entre Funciones (f1 y f2)</option>
        </select>
            </select>

<div class="botones-container">
<button onclick="procesar()" class="boton-estilo boton-principal">Actualizar Gráfica</button>
@@ -129,7 +149,8 @@ <h1>Graficadora Inteligente</h1>
let html = '';
for (const [hex, nombre] of Object.entries(paletaElegante)) {
const selected = hex === colorSeleccionado ? 'selected' : '';
        html += `<option value="${hex}" ${selected}>${nombre}</option>`;
        // Usamos estilo en línea para el fondo y texto transparente
        html += `<option value="${hex}" ${selected} style="background-color: ${hex}; color: transparent;">${nombre}</option>`;
}
return html;
}
@@ -138,9 +159,12 @@ <h1>Graficadora Inteligente</h1>
const container = document.getElementById('lista-funciones');
const div = document.createElement('div');
div.className = 'input-group';
    // Se añade style inline al select para el color inicial y un onchange para actualizarlo
div.innerHTML = `
       <input class="fn-input" placeholder="Ej: x^2" value="${valorInicial}">
        <select class="color-select">${generarOpcionesColor(colorInicial)}</select>
        <select class="color-select" style="background-color: ${colorInicial};" onchange="this.style.backgroundColor = this.value">
            ${generarOpcionesColor(colorInicial)}
        </select>
       <button class="btn-remove" onclick="if(document.querySelectorAll('.input-group').length > 1) { this.parentElement.remove(); procesar(); }">×</button>
   `;
container.appendChild(div);
@@ -167,10 +191,8 @@ <h1>Graficadora Inteligente</h1>
const colorValue = grupo.querySelector('.color-select').value;
if(fnValue !== "") {
funcionesValidas.push({ fn: fnValue, color: colorValue });
                // Solo añadimos la línea normal si NO estamos en modo área entre curvas (para evitar duplicados visuales)
                if (modo !== 'area_entre') {
                    data.push({ fn: fnValue, color: colorValue });
                }
                // Siempre añadimos la línea base
                data.push({ fn: fnValue, color: colorValue });
}
});

@@ -197,20 +219,7 @@ <h1>Graficadora Inteligente</h1>
info.innerHTML = "Área de la primera función respecto al eje X";
}

        if (modo === 'area_entre' && funcionesValidas.length >= 2) {
            // Sintaxis CORRECTA para área entre f1 y f2
            // Añadimos las líneas por separado primero
            data.push({ fn: funcionesValidas[0].fn, color: funcionesValidas[0].color });
            data.push({ fn: funcionesValidas[1].fn, color: funcionesValidas[1].color });
            // Añadimos el sombreado vinculando f1 a f2
            data.push({
                fn: funcionesValidas[0].fn,
                area: { fn: funcionesValidas[1].fn },
                color: 'rgba(0, 0, 0, 0.15)',
                skipTip: true 
            });
            info.innerHTML = "Sombreado entre f1 (negro) y f2 (azul)";
        }
        // Lógica de 'area_entre' eliminada

functionPlot({
target: "#grafica",
